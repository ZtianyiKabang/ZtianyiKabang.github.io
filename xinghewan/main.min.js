var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},ApplyPage=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){var t=new egret.Shape;this.addChild(t),t.graphics.beginFill(0),t.graphics.drawRect(0,0,640,1030),t.graphics.endFill(),t.alpha=.8,t.touchEnabled=!0;var e=new egret.Bitmap(RES.getRes("apply_man_png"));this.addChild(e),e.x=52,e.y=175;var i=new egret.Bitmap(RES.getRes("name_hint_png"));this.addChild(i),i.x=174,i.y=343;var n=new egret.Bitmap(RES.getRes("edit_png"));this.addChild(n),n.x=182,n.y=382;var r=new egret.TextField;this.addChild(r),r.type=egret.TextFieldType.INPUT,r.textColor=16777215,r.width=292,r.height=25,r.size=25,r.x=188,r.y=385,this.nameT=r;var s=new egret.Bitmap(RES.getRes("phone_hint_png"));this.addChild(s),s.x=174,s.y=454;var a=new egret.Bitmap(RES.getRes("edit_png"));this.addChild(a),a.x=182,a.y=492;var h=new egret.TextField;this.addChild(h),h.type=egret.TextFieldType.INPUT,h.textColor=16777215,h.width=292,h.height=25,h.size=25,h.x=188,h.y=496,this.phoneT=h,h.restrict="0-9",h.maxChars=11;var o=new egret.Bitmap(RES.getRes("apply_btn_png"));this.addChild(o),o.x=247,o.y=585,o.touchEnabled=!0,o.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.Apply,this)},e.prototype.Apply=function(t){""==this.nameT.text?alert("请输入姓名"):""==this.phoneT.text?alert("请输入手机号码"):1==checkTel(this.phoneT.text)?this.onSubmitApply():0==checkTel(this.phoneT.text)&&alert("请输入正确的手机号码")},e.prototype.onSubmitApply=function(){var t="name="+this.nameT.text+"&phone_number="+this.phoneT.text,e=new egret.HttpRequest;e.responseType=egret.HttpResponseType.TEXT,e.open(apply_url,egret.HttpMethod.POST),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.send(t),e.addEventListener(egret.Event.COMPLETE,this.onPostComplete,this)},e.prototype.onPostComplete=function(t){var e=t.currentTarget;console.log("post data : ",e.response);var i=JSON.parse(e.response);0==i.status?(this.dispatchEventWith("applyStart"),this.removeChildren()):alert(i.msg)},e}(egret.DisplayObjectContainer);__reflect(ApplyPage.prototype,"ApplyPage");var BgMap=function(t){function e(){var e=t.call(this)||this;return e.speed=4,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){this.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStage,this),this.stageW=this.stage.stageWidth,this.stageH=this.stage.stageHeight;var e=RES.getRes("game_bg_jpg");this.textureHeight=e.textureHeight,this.rowCount=Math.ceil(this.stageH/this.textureHeight)+1,this.bmpArr=[];for(var i=0;i<this.rowCount;i++){var n=new egret.Bitmap(RES.getRes("game_bg_jpg"));n.y=this.textureHeight*i-(this.textureHeight*this.rowCount-this.stageH),this.bmpArr.push(n),this.addChild(n)}},e.prototype.start=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this),this.addEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this)},e.prototype.enterFrameHandler=function(t){for(var e=0;e<this.rowCount;e++){var i=this.bmpArr[e];i.y+=this.speed,i.y>this.stageH&&(i.y=this.bmpArr[0].y-this.textureHeight,this.bmpArr.pop(),this.bmpArr.unshift(i))}},e.prototype.pause=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.enterFrameHandler,this)},e}(egret.DisplayObjectContainer);__reflect(BgMap.prototype,"BgMap");var GamePage=function(t){function e(){var e=t.call(this)||this;return e.man_arr=[],e.manC=[],e.status=!1,e.distance=new egret.Point,e.distance2=new egret.Point,e.conversion=!1,e.conversion2=!1,e.game_crash=!1,e.interval=150,e.startTime=egret.getTimer(),e.count=30,e.quantity=1,e.pdelay=30,e.person=!0,e.xarr=[-200,700],e.startGame(),e}return __extends(e,t),e.prototype.createView=function(){var t=this;this.game_bg=new BgMap,this.addChild(this.game_bg),this.man=new egret.Bitmap(RES.getRes("man_1_png")),this.addChild(this.man),this.man.x=260+this.man.width/2,this.man.y=449+this.man.height/2,this.man.anchorOffsetX=this.man.width/2,this.man.anchorOffsetY=this.man.height/2,this.man.touchEnabled=!0,this.man.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.Down,this),this.man.addEventListener(egret.TouchEvent.TOUCH_END,this.Up,this),this.man_scope=new egret.Shape,this.addChild(this.man_scope),this.man_scope.graphics.beginFill(0),this.man_scope.graphics.drawRect(0,0,44,120),this.man_scope.graphics.endFill(),this.man_scope.x=287+this.man_scope.width/2,this.man_scope.y=487+this.man_scope.height/2,this.man_scope.anchorOffsetX=this.man_scope.width/2,this.man_scope.anchorOffsetY=this.man_scope.height/2,this.man_scope.alpha=0,this.man_scope.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.Down,this),this.man_scope.addEventListener(egret.TouchEvent.TOUCH_END,this.Up,this);var e=new egret.Bitmap(RES.getRes("bgm_png"));this.addChild(e),e.x=24,e.y=23,e.touchEnabled=!0,e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.soundButton,this);var i=new egret.Bitmap(RES.getRes("timer_frame_png"));this.addChild(i),i.x=237,i.y=44,this.timer=new egret.TextField,this.addChild(this.timer),this.timer.textColor=0,this.timer.size=42,this.timer.x=272,this.timer.y=83;var n=new egret.Bitmap(RES.getRes("photo_frame_png"));this.addChild(n),n.x=496,n.y=45;var r=new egret.ImageLoader;r.once(egret.Event.COMPLETE,function(){var e=r,i=e.data,n=new egret.Bitmap(i);n.x=500,n.y=49,t.addChild(n)},this),r.load(icon_url)},e.prototype.startGame=function(){this.createView(),this.game_bg.start(),this.myTimer=new egret.Timer(this.interval),this.myTimer.addEventListener(egret.TimerEvent.TIMER,this.gameTimer,this),this.myTimer.start()},e.prototype.gameTimer=function(){if(this.Time=egret.getTimer(),this.endTime=this.Time-this.startTime,this.m_count=Math.floor(2*Math.random())+3,this.count++,this.count>this.pdelay){this.count=0;for(var t=0;t<this.m_count;t++)this.enemy()}for(0==this.conversion?(this.conversion=!0,this.man.texture=RES.getRes("man_1_2_png")):(this.man.texture=RES.getRes("man_1_png"),this.conversion=!1),this.updateTime(),this.m=0;this.m<this.man_arr.length;this.m++){if(0==this.man_arr[this.m].isSprint){var e=this.man.x+this.man.width/2-(this.man_arr[this.m].x+this.man_arr[this.m].width/2),i=this.man.y+this.man.height/2-(this.man_arr[this.m].y+this.man_arr[this.m].height/2),n=Math.sqrt(Math.pow(e,2)+Math.pow(i,2));n>260?this.jog(this.man_arr[this.m],this.man,"man_2_2_png","man_2_png"):(this.man_arr[this.m].isSprint=!0,this.sprint(this.man_arr[this.m],this.man,"man_3_png"))}var r=this.hitTest(this.man_scope,this.man_arr[this.m]);1==r&&0==this.game_crash&&(this.game_crash=!0,this.gameOver())}},e.prototype.removeTarget=function(t){t.parent&&t.parent.removeChild(t)},e.prototype.gameOver=function(){this.game_bg.pause(),this.myTimer.stop(),this.touchChildren=!1,this.man.touchEnabled=!1,this.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.Move,this),this.onSubmitTimer()},e.prototype.soundButton=function(){play_sound()},e.prototype.updateTime=function(){var t=Math.floor(this.endTime/1e3%100),i=Math.floor(this.endTime/10%100);10>i?this.timer.text=t+".0"+i:this.timer.text=t+"."+i,e.timer=this.timer.text},e.prototype.Down=function(t){this.status=!0,this.distance.x=t.stageX-this.man.x,this.distance.y=t.stageY-this.man.y,this.distance2.x=t.stageX-this.man_scope.x,this.distance2.y=t.stageY-this.man_scope.y,this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.Move,this)},e.prototype.Move=function(t){this.status&&(this.man.x=t.stageX-this.distance.x,this.man.y=t.stageY-this.distance.y,this.man_scope.x=t.stageX-this.distance2.x,this.man_scope.y=t.stageY-this.distance2.y)},e.prototype.Up=function(t){this.status=!1,this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.Move,this)},e.prototype.onSubmitTimer=function(){var t="timer"+e.timer,i=new egret.HttpRequest;i.responseType=egret.HttpResponseType.TEXT,i.open(timer_url,egret.HttpMethod.POST),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send(t),i.addEventListener(egret.Event.COMPLETE,this.onPostComplete,this)},e.prototype.onPostComplete=function(t){var e=t.currentTarget;console.log("post data : ",e.response);var i=JSON.parse(e.response);1==i.status?this.dispatchEventWith("gameResult"):alert(i.msg)},e.prototype.enemy=function(){var t=Math.floor(1e3*Math.random()-100)+100,e=this.xarr[Math.floor(Math.random()*this.xarr.length)],i=new egret.Bitmap(RES.getRes("man_2_png"));this.addChild(i),i.x=e+i.width/2,i.y=t+i.height/2,i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,i.isSprint=!1,this.man_arr.push(i)},e.prototype.jog=function(t,e,i,n){0==this.conversion2?(this.conversion2=!0,t.texture=RES.getRes(i)):(t.texture=RES.getRes(n),this.conversion2=!1),t.x>e.x&&(t.x-=30),t.x<=e.x&&(t.x+=30),t.y>e.y&&(t.y-=30),t.y<=e.y&&(t.y+=30)},e.prototype.sprintOut=function(t){this.man_arr.splice(this.man_arr.indexOf(t),1),this.removeTarget(t)},e.prototype.sprint=function(t,e,i){var n,r,s,a,h,o=t.x-e.x;t.texture=RES.getRes(i),0>=o&&(s=Math.floor((700-t.x)*(e.y-t.y)/(e.x-t.x)+t.y),1130>=s&&s>=-200?(n=s-t.y,r=700-t.x,h=Math.floor(360*Math.atan(n/r)/(2*Math.PI)),egret.Tween.get(t).to({rotation:h},100).to({x:700,y:s},1200).call(this.sprintOut,this,[t])):s>1130?(a=Math.floor((1130-t.y)*(e.x-t.x)/(e.y-t.y)+t.x),n=1130-t.y,r=a-t.x,h=Math.floor(360*Math.atan(n/r)/(2*Math.PI)),egret.Tween.get(t).to({rotation:h},100).to({x:a,y:1130},1200).call(this.sprintOut,this,[t])):-200>s&&(a=Math.floor((-200-t.y)*(e.x-t.x)/(e.y-t.y)+t.x),n=-200-t.y,r=a-t.x,h=Math.floor(360*Math.atan(n/r)/(2*Math.PI)),egret.Tween.get(t).to({rotation:h},100).to({x:a,y:-200},1200).call(this.sprintOut,this,[t]))),o>0&&(s=Math.floor((-200-t.x)*(e.y-t.y)/(e.x-t.x)+t.y),1130>=s&&s>=-200?(n=s-t.y,r=-200-t.x,h=Math.floor(360*Math.atan(n/r)/(2*Math.PI)),egret.Tween.get(t).to({rotation:h-180},100).to({x:-200,y:s},1200).call(this.sprintOut,this,[t])):s>=1130?(a=Math.floor((1130-t.y)*(e.x-t.x)/(e.y-t.y)+t.x),n=1130-t.y,r=a-t.x,h=Math.floor(360*Math.atan(n/r)/(2*Math.PI)),egret.Tween.get(t).to({rotation:h-180},100).to({x:a,y:1130},1200).call(this.sprintOut,this,[t])):-200>s&&(a=Math.floor((-200-t.y)*(e.x-t.x)/(e.y-t.y)+t.x),n=-200-t.y,r=a-t.x,h=Math.floor(360*Math.atan(n/r)/(2*Math.PI)),egret.Tween.get(t).to({rotation:h-180},100).to({x:a,y:-200},1200).call(this.sprintOut,this,[t])))},e.prototype.hitTest=function(t,e){var i=t.getBounds(),n=e.getBounds();return i.x=t.x-t.width/2,i.y=t.y-t.height/2,n.x=e.x-e.width/2,n.y=e.y-e.height/2,i.intersects(n)},e}(egret.DisplayObjectContainer);__reflect(GamePage.prototype,"GamePage");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.setProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var Main=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},e.prototype.onResourceLoadComplete=function(t){"preload"==t.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.createGameScene())},e.prototype.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},e.prototype.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},e.prototype.onResourceProgress=function(t){"preload"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},e.prototype.createGameScene=function(){this.onStart()},e.prototype.onStart=function(){this.currengPage&&(egret.Tween.get(this.currengPage).to({alpha:0},400).call(function(t){t.parent.removeChild(t)},this,[this.currengPage]),this.currengPage=null),this.currengPage=new StartPage,this.addChild(this.currengPage),this.currengPage.addEventListener("startGame",this.onGame,this)},e.prototype.onGame=function(){this.currengPage&&(egret.Tween.get(this.currengPage).to({alpha:0},400).call(function(t){t.parent.removeChild(t)},this,[this.currengPage]),this.currengPage=null),this.currengPage=new GamePage,this.addChild(this.currengPage),this.currengPage.addEventListener("gameResult",this.onResult,this)},e.prototype.onResult=function(){this.floatingPage=new ResultPage,this.addChild(this.floatingPage),this.floatingPage.addEventListener("resultStart",this.onStart,this),this.floatingPage.addEventListener("resultGame",this.onGame,this),this.floatingPage.addEventListener("resultApply",this.onApply,this)},e.prototype.onApply=function(){this.floatingPage&&(egret.Tween.get(this.floatingPage).to({alpha:0},400).call(function(t){t.parent.removeChild(t)},this,[this.floatingPage]),this.floatingPage=null),this.floatingPage=new ApplyPage,this.addChild(this.floatingPage),this.floatingPage.addEventListener("applyStart",this.onStart,this)},e.prototype.onRanking=function(){this.floatingPage&&(egret.Tween.get(this.floatingPage).to({alpha:0},400).call(function(t){t.parent.removeChild(t)},this,[this.floatingPage]),this.floatingPage=null),this.floatingPage=new RankingPage,this.addChild(this.floatingPage)},e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var RankingItem=function(t){function e(e,i,n,r,s,a){var h=t.call(this)||this,o=new egret.TextField;h.addChild(o),o.textColor=0,o.size=20,o.textAlign="center",o.width=24,o.x=2,o.y=47,o.text=e;var g=new egret.ImageLoader;g.once(egret.Event.COMPLETE,function(){var t=g,e=t.data,i=new egret.Bitmap(e);i.width=66,i.height=65,i.x=39,i.y=24,h.addChild(i)},h),g.load(i);var d=new egret.TextField;h.addChild(d),d.textColor=0,d.size=16,d.textAlign="center",d.width=90,d.x=105,d.y=35,d.text=n;var p=new egret.TextField;h.addChild(p),p.textColor=0,p.size=16,p.textAlign="center",p.width=98,p.x=130,p.y=64,p.text=r;var l=new egret.TextField;h.addChild(l),l.textColor=0,l.size=16,l.textAlign="center",l.width=72,l.x=241,l.y=64,l.text=s;var c=new egret.TextField;h.addChild(c),c.textColor=0,c.size=16,c.textAlign="center",c.width=55,c.x=398,c.y=45,c.text=a;var u=new egret.Bitmap(RES.getRes("dashed_png"));return h.addChild(u),u.x=4,u.y=96,h}return __extends(e,t),e}(egret.DisplayObjectContainer);__reflect(RankingItem.prototype,"RankingItem");var RankingPage=function(t){function e(){var e=t.call(this)||this;return e.img=[],e.createView(),e}return __extends(e,t),e.prototype.createView=function(){var t=new egret.Shape;this.addChild(t),t.graphics.beginFill(0),t.graphics.drawRect(0,0,640,1030),t.graphics.endFill(),t.alpha=.2,t.touchEnabled=!0;var e=new egret.Bitmap(RES.getRes("ranking_png"));this.addChild(e),e.x=65,e.y=98;var i=new egret.Bitmap(RES.getRes("rule_close_png"));this.addChild(i),i.x=508,i.y=63,i.touchEnabled=!0,i.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.rankingClose,this),this.onSubmitRanking()},e.prototype.rankingClose=function(t){this.removeChildren()},e.prototype.onSubmitRanking=function(){var t=new egret.HttpRequest;t.responseType=egret.HttpResponseType.TEXT,t.open(ranking_url,egret.HttpMethod.POST),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send(),t.addEventListener(egret.Event.COMPLETE,this.onPostComplete,this)},e.prototype.onPostComplete=function(t){var e=t.currentTarget,i=JSON.parse(e.response),n=new egret.Sprite,r=new egret.Sprite;n.addChild(r),r.x=4,r.width=452,r.height=87;for(var s=87,a=0;a<i.data.length;a++){var h=new RankingItem(i.data[a].rnum,i.data[a].icon,i.data[a].name,i.data[a].date,i.data[a].time,i.data[a].score);r.addChild(h),h.y=s*a}var o=new egret.ScrollView;o.setContent(n),this.addChild(o),o.x=92,o.y=239,o.width=460,o.height=673},e}(egret.DisplayObjectContainer);__reflect(RankingPage.prototype,"RankingPage");var ResultPage=function(t){function e(){var e=t.call(this)||this;return e.showResult(),e}return __extends(e,t),e.prototype.createView=function(){var t=new egret.Shape;this.addChild(t),t.graphics.beginFill(0),t.graphics.drawRect(0,0,640,1030),t.graphics.endFill(),t.alpha=.8,this.expression=new egret.Bitmap(RES.getRes("failure_png")),this.addChild(this.expression),this.expression.x=238,this.expression.y=188,this.result=new egret.Bitmap(RES.getRes("result_png")),this.addChild(this.result),this.result.x=145,this.result.y=460,this.btn=new egret.Bitmap(RES.getRes("play_again_btn_png")),this.addChild(this.btn),this.btn.x=233,this.btn.y=693,this.btn.touchEnabled=!0;var e=new egret.Bitmap(RES.getRes("ranking_btn_png"));this.addChild(e),e.x=198,e.y=794,e.touchEnabled=!0,e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.Ranking,this);var i=new egret.Bitmap(RES.getRes("back_homepage_png"));this.addChild(i),i.x=338,i.y=794,i.touchEnabled=!0,i.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.Start,this);var n=new egret.TextField;this.addChild(n),n.text=GamePage.timer+"秒",n.textColor=16777215,n.size=21,n.x=346,n.y=458,this.onSubmitResult()},e.prototype.showResult=function(){this.createView(),GamePage.timer>=10?(this.expression.texture=RES.getRes("succeed_png"),this.expression.x=82,this.expression.y=163,this.result.texture=RES.getRes("result_2_png"),this.result.x=209,this.result.y=459,0==isPost?(this.btn.texture=RES.getRes("apply_btn_png"),this.btn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.Apply,this)):(this.btn.texture=RES.getRes("play_again_btn_png"),this.btn.touchEnabled=!0,this.btn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.Game,this))):this.btn.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.Game,this)},e.prototype.Ranking=function(t){this.ranking=new RankingPage,this.addChild(this.ranking)},e.prototype.Start=function(t){this.dispatchEventWith("resultStart"),this.removeChildren(),t.currentTarget.touchEnabled=!1,t.currentTarget.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.Start,this)},e.prototype.Apply=function(t){this.dispatchEventWith("resultApply"),isPost=!0},e.prototype.Game=function(t){this.dispatchEventWith("resultGame"),t.currentTarget.touchEnabled=!1,t.currentTarget.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.Apply,this)},e.prototype.onSubmitResult=function(){var t=new egret.HttpRequest;t.responseType=egret.HttpResponseType.TEXT,t.open(result_url,egret.HttpMethod.POST),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send(),t.addEventListener(egret.Event.COMPLETE,this.onPostComplete,this)},e.prototype.onPostComplete=function(t){var e=t.currentTarget,i=JSON.parse(e.response),n=new egret.TextField;this.addChild(n),n.text=i.best_score+"秒",n.textColor=16777215,n.size=21,n.x=343,n.y=533;var r=new egret.TextField;this.addChild(r),r.text=i.ranking,r.textColor=16777215,r.size=21,r.x=380,r.y=570},e}(egret.DisplayObjectContainer);__reflect(ResultPage.prototype,"ResultPage");var RulePage=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){var t=new egret.Shape;this.addChild(t),t.graphics.beginFill(0),t.graphics.drawRect(0,0,640,1030),t.graphics.endFill(),t.alpha=.8,t.touchEnabled=!0;var e=new egret.Bitmap(RES.getRes("rule_png"));this.addChild(e),e.x=39,e.y=161;var i=new egret.Bitmap(RES.getRes("rule_close_png"));this.addChild(i),i.x=479,i.y=156,i.touchEnabled=!0,i.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.ruleClose,this)},e.prototype.ruleClose=function(t){this.removeChildren(),t.currentTarget.touchEnabled=!1,t.currentTarget.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.ruleClose,this)},e}(egret.DisplayObjectContainer);__reflect(RulePage.prototype,"RulePage");var StartPage=function(t){function e(){var e=t.call(this)||this;return e.start=!0,e.createView(),e}return __extends(e,t),e.prototype.createView=function(){var t=new egret.Bitmap(RES.getRes("bg_jpg"));this.addChild(t);var e=new egret.Bitmap(RES.getRes("bgm_png"));this.addChild(e),e.x=24,e.y=23,e.touchEnabled=!0,e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.soundButton,this);var i=new egret.Bitmap(RES.getRes("leaf_png"));this.addChild(i),i.x=266,i.y=-298,egret.Tween.get(i).to({y:-98},800,egret.Ease.backOut);var n=new egret.Bitmap(RES.getRes("leaf_2_png"));this.addChild(n),n.x=-54,n.y=1035,egret.Tween.get(n).to({y:835},800,egret.Ease.backOut);var r=new egret.Bitmap(RES.getRes("logo_png"));this.addChild(r),r.anchorOffsetX=r.width/2,r.anchorOffsetY=r.height/2,r.x=420+r.width/2,r.y=23+r.height/2,r.scaleX=r.scaleY=0,egret.Tween.get(r).wait(200).to({scaleX:1,scaleY:1},2e3,egret.Ease.elasticOut);var s=new egret.Bitmap(RES.getRes("figure_left_png"));this.addChild(s),s.x=106,s.y=304,egret.Tween.get(s,{loop:!0}).to({y:284},1200).to({y:304},1200);var a=new egret.Bitmap(RES.getRes("figure_right_png"));this.addChild(a),a.x=264,a.y=170,egret.Tween.get(a,{loop:!0}).to({y:150},1e3).to({y:170},1e3);var h=new egret.Bitmap(RES.getRes("rule_btn_png"));this.addChild(h),h.x=29+h.width/2,h.y=64+h.height/2,h.anchorOffsetX=h.width/2,h.anchorOffsetY=h.height/2,h.scaleX=h.scaleY=.8,egret.Tween.get(h,{loop:!0}).to({scaleX:1,scaleY:1},2e3,egret.Ease.quadOut).to({scaleX:.8,scaleY:.8},2e3,egret.Ease.quadOut),h.touchEnabled=!0,h.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.gameRule,this);var o=new egret.Bitmap(RES.getRes("title_png"));this.addChild(o),o.x=95,o.y=100,o.alpha=0,egret.Tween.get(o).to({y:295,alpha:1},1600,egret.Ease.elasticOut);var g=new egret.Bitmap(RES.getRes("fish_png"));this.addChild(g),g.anchorOffsetX=g.width/2,g.anchorOffsetY=g.height/2,g.x=303+g.width/2,g.y=373+g.height/2,g.scaleX=g.scaleY=0,g.alpha=0,egret.Tween.get(g).to({alpha:1,scaleX:1,scaleY:1},1600,egret.Ease.elasticOut);var d=new egret.Bitmap(RES.getRes("person_left_png"));this.addChild(d),d.x=93,d.y=268,egret.Tween.get(d,{loop:!0}).to({y:248},1200).to({y:268},1200);var p=new egret.Bitmap(RES.getRes("person_right_png"));this.addChild(p),p.x=304,p.y=134,egret.Tween.get(p,{loop:!0}).to({y:114},1e3).to({y:134},1e3);var l=new egret.Bitmap(RES.getRes("swim_ring_png"));this.addChild(l),l.x=311,l.y=763,egret.Tween.get(l,{loop:!0}).to({y:743},800).to({y:763},800);var c=new egret.Bitmap(RES.getRes("start_btn_png"));this.addChild(c),c.x=230+c.width/2,c.y=880+c.height/2,c.anchorOffsetX=c.width/2,c.anchorOffsetY=c.height/2,c.rotation=-45,c.alpha=0,c.scaleX=c.scaleY=.8,egret.Tween.get(c).wait(1e3).to({scaleX:1,scaleY:1,rotation:0,alpha:1},200,egret.Ease.elasticOut),c.touchEnabled=!0,c.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.startGame,this)},e.prototype.soundButton=function(){play_sound()},e.prototype.gameRule=function(t){this.rule=new RulePage,this.addChild(this.rule),t.currentTarget.touchEnable=!1,t.currentTarget.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.gameRule,this)},e.prototype.startGame=function(t){1==this.start&&(this.start=!1,this.dispatchEventWith("startGame"),t.currentTarget.touchEnable=!1,t.currentTarget.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.startGame,this))},e}(egret.DisplayObjectContainer);__reflect(StartPage.prototype,"StartPage");